<!DOCTYPE html>
<html>
<head>
  <title>JMockit Coverage Report - SolrGoodsSearchServiceImpl.java</title>
  <meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
  <link rel='stylesheet' type='text/css' href='../../../../../../../coverage.css'/>
  <link rel='shortcut icon' type='image/png' href='../../../../../../../logo.png'/>
  <script type='text/javascript' src='../../../../../../../coverage.js'></script>
  <script type='text/javascript' src='../../../../../../../prettify.js'></script>
</head>
<body onload='prettyPrint()'>
  <table cellpadding='0' cellspacing='1'>
    <caption>rageon-service\src\main\java\com\adanac\tool\rageon\service\module\solr\SolrGoodsSearchServiceImpl.java</caption>
    <tr>
      <td class='line'>1</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>package com.adanac.tool.rageon.service.module.solr;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td><pre class='imports prettyprint' onclick='showHideLines(this)'><div>import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Properties;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.springframework.beans.factory.InitializingBean;

import com.adanac.framework.exception.SysException;
import com.adanac.framework.log.MyLogger;
import com.adanac.framework.log.MyLoggerFactory;
import com.adanac.framework.page.Pager;
import com.adanac.framework.page.PagerParam;
import com.adanac.framework.uniconfig.client.UniconfigClient;
import com.adanac.framework.uniconfig.client.UniconfigClientImpl;
import com.adanac.framework.uniconfig.client.UniconfigNode;
import com.adanac.framework.utils.StringUtils;
import com.adanac.tool.rageon.constant.AnchoredTypeEnum;
import com.adanac.tool.rageon.constant.SkuStatusEnum;
import com.adanac.tool.rageon.intf.module.solr.entity.SolrGoodsDto;
import com.adanac.tool.rageon.intf.module.solr.service.SolrGoodsSearchService;
import com.adanac.tool.rageon.utils.EscapeUtil;
import com.adanac.tool.rageon.utils.UrlBuilder;
import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;
</div><span>import ...</span></pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>/**
 * 商品搜索的服务类，主要对接solr进行商品数据的搜索，并提供给前端检索商品使用
 * 
 */
// @Service("solrGoodsSearchService")</div><span>/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>43</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>public class SolrGoodsSearchServiceImpl implements SolrGoodsSearchService, InitializingBean {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>45</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private MyLogger <span class='instance uncovered' title='Reads: 0 Writes: 0'>logger</span> = MyLoggerFactory.getLogger(SolrGoodsSearchServiceImpl.class);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>47</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private Properties <span class='instance uncovered' title='Reads: 0 Writes: 0'>prop</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>49</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private String <span class='instance uncovered' title='Reads: 0 Writes: 0'>nodeName</span>;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>51</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String getNodeName() {</pre></td>
    </tr>
    <tr>
      <td class='line'>52</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return nodeName;</pre></td>
    </tr>
    <tr>
      <td class='line'>53</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>55</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public void setNodeName(String nodeName) {</pre></td>
    </tr>
    <tr>
      <td class='line'>56</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		this.nodeName = nodeName;</pre></td>
    </tr>
    <tr>
      <td class='line'>57</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>59</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>60</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Pager&lt;SolrGoodsDto> searchGoods(Map&lt;String, Object> map, PagerParam param) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/2</span>
        <span class='uncovered' onclick="showPath(this,'l62s0 l75s0 l76s0 l77s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l62s0 l75s0 l79s0 l85s0 l89s0 l94s0')">B: 0</span>
      </td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>62</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> pager = new Pager&lt;SolrGoodsDto>();</pre></td>
    </tr>
    <tr>
      <td class='line'>63</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>64</td><td>&nbsp;</td>
      <td><pre class='comment'>			// 组装solr查询链接</pre></td>
    </tr>
    <tr>
      <td class='line'>65</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			String requestUrl = assmbleSearchParams(map, param, pager);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>67</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			List&lt;SolrGoodsDto> sList = new ArrayList&lt;SolrGoodsDto>();</pre></td>
    </tr>
    <tr>
      <td class='line'>68</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			logger.info("searchGoods url {}", requestUrl);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>70</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			String result = this.execute(requestUrl);</pre></td>
    </tr>
    <tr>
      <td class='line'>71</td><td>&nbsp;</td>
      <td><pre class='comment'>			// 转换对象</pre></td>
    </tr>
    <tr>
      <td class='line'>72</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			JSONObject jsonObject = JSONObject.parseObject(result);</pre></td>
    </tr>
    <tr>
      <td class='line'>73</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			JSONObject responseHead = jsonObject.getJSONObject("responseHeader");</pre></td>
    </tr>
    <tr>
      <td class='line'>74</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			String stat = responseHead.getString("status");</pre></td>
    </tr>
    <tr>
      <td class='line'>75</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			if (!"0".equals(stat)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>76</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				logger.error("query fail stat {}", stat);</pre></td>
    </tr>
    <tr>
      <td class='line'>77</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				return pager;</pre></td>
    </tr>
    <tr>
      <td class='line'>78</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>79</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			JSONObject response = jsonObject.getJSONObject("response");</pre></td>
    </tr>
    <tr>
      <td class='line'>80</td><td>&nbsp;</td>
      <td><pre class='comment'>			// 获取总记录条数</pre></td>
    </tr>
    <tr>
      <td class='line'>81</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			int numFound = response.getIntValue("numFound");</pre></td>
    </tr>
    <tr>
      <td class='line'>82</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			pager.setTotalDataCount(numFound);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>84</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			JSONArray docs = response.getJSONArray("docs");</pre></td>
    </tr>
    <tr>
      <td class='line'>85</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			for (int i = 0; i &lt; docs.size(); i++) {</pre></td>
    </tr>
    <tr>
      <td class='line'>86</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				JSONObject json = docs.getJSONObject(i);</pre></td>
    </tr>
    <tr>
      <td class='line'>87</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sList.add(JSONObject.toJavaObject(json, SolrGoodsDto.class));</pre></td>
    </tr>
    <tr>
      <td class='line'>88</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>89</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			for (SolrGoodsDto dto : sList) {</pre></td>
    </tr>
    <tr>
      <td class='line'>90</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				logger.info(dto.toString());</pre></td>
    </tr>
    <tr>
      <td class='line'>91</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>92</td><td>&nbsp;</td>
      <td><pre class='comment'>			// logger.info("queryBytitle result : {}", result);</pre></td>
    </tr>
    <tr>
      <td class='line'>93</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			pager.setDatas(sList);</pre></td>
    </tr>
    <tr>
      <td class='line'>94</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return pager;</pre></td>
    </tr>
    <tr>
      <td class='line'>95</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} catch (Exception e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>96</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			logger.error("searchGoods fail", e);</pre></td>
    </tr>
    <tr>
      <td class='line'>97</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return pager;</pre></td>
    </tr>
    <tr>
      <td class='line'>98</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>100</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>102</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public static void main(String[] args) {</pre></td>
    </tr>
    <tr>
      <td class='line'>103</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		SolrGoodsSearchServiceImpl s = new SolrGoodsSearchServiceImpl();</pre></td>
    </tr>
    <tr>
      <td class='line'>104</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Map&lt;String, Object> map = new HashMap&lt;String, Object>();</pre></td>
    </tr>
    <tr>
      <td class='line'>105</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("status", "1,3");</pre></td>
    </tr>
    <tr>
      <td class='line'>106</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("cooPeratorType", 0);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>108</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		PagerParam param = new PagerParam();</pre></td>
    </tr>
    <tr>
      <td class='line'>109</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> pager = new Pager&lt;SolrGoodsDto>();</pre></td>
    </tr>
    <tr>
      <td class='line'>110</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String url = s.assmbleSearchParams(map, param, pager);</pre></td>
    </tr>
    <tr>
      <td class='line'>111</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		System.out.println("url=" + url);</pre></td>
    </tr>
    <tr>
      <td class='line'>112</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * 组装查询的链接
	 * 
	 * @param map
	 * @param param
	 * @param pager
	 * @return
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>122</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	private String assmbleSearchParams(Map&lt;String, Object> map, PagerParam param, Pager&lt;SolrGoodsDto> pager) {</pre></td>
    </tr>
    <tr>
      <td class='line'>123</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String title = map.get("title") == null ? "" : map.get("title").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>124</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String classId = map.get("classId") == null ? "" : map.get("classId").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>125</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String status = map.get("status") == null ? "" : map.get("status").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>126</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String localCode = map.get("localCode") == null ? "" : map.get("localCode").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>128</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String classOne = map.get("classOne") == null ? "" : map.get("classOne").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>129</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String classTwo = map.get("classTwo") == null ? "" : map.get("classTwo").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>130</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String classThree = map.get("classThree") == null ? "" : map.get("classThree").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>131</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String categoryId = map.get("categoryId") == null ? "" : map.get("categoryId").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>132</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String brand = map.get("brand") == null ? "" : map.get("brand").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>133</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String suppId = map.get("suppId") == null ? "" : map.get("suppId").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>135</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String barCode = map.get("barCode") == null ? "" : map.get("barCode").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>137</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 单铺的查询</pre></td>
    </tr>
    <tr>
      <td class='line'>138</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String desc = map.get("desc") == null ? "" : map.get("desc").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>139</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String skuId = map.get("skuId") == null ? "" : map.get("skuId").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>141</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 引进挂靠</pre></td>
    </tr>
    <tr>
      <td class='line'>142</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String anchored = map.get("anchored") == null ? "" : map.get("anchored").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>144</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String categoryName = map.get("categoryName") == null ? "" : map.get("categoryName").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>145</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String brandName = map.get("brandName") == null ? "" : map.get("brandName").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>146</td><td>&nbsp;</td>
      <td><pre class='comment'>		// status = SkuStatusEnum.STATUS_UP.getValue()+"";</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>148</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 排除平台的</pre></td>
    </tr>
    <tr>
      <td class='line'>149</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String onlySupp = map.get("onlySupp") == null ? "" : map.get("onlySupp").toString();</pre></td>
    </tr>
    <tr>
      <td class='line'>150</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String cooPeratorType = map.get("cooPeratorType") == null ? "" : map.get("cooPeratorType").toString();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>152</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		StringBuffer sb = new StringBuffer();</pre></td>
    </tr>
    <tr>
      <td class='line'>153</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (StringUtils.isEmpty(title)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>154</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			title = "*";</pre></td>
    </tr>
    <tr>
      <td class='line'>155</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>156</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		sb.append("titleSuggest:" + EscapeUtil.escapeQueryChars(title));</pre></td>
    </tr>
    <tr>
      <td class='line'>157</td><td>&nbsp;</td>
      <td><pre class='comment'>		// sb.append("titleSuggest:" + title);</pre></td>
    </tr>
    <tr>
      <td class='line'>158</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(classId)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>159</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND fclassId:" + classId);</pre></td>
    </tr>
    <tr>
      <td class='line'>160</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>161</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(localCode)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>162</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND localCode:" + localCode);</pre></td>
    </tr>
    <tr>
      <td class='line'>163</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>165</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(barCode)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>166</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND barCode:" + barCode);</pre></td>
    </tr>
    <tr>
      <td class='line'>167</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>169</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(status)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>170</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			if (status.contains(",")) {</pre></td>
    </tr>
    <tr>
      <td class='line'>171</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				String[] statusArr = status.split(",");</pre></td>
    </tr>
    <tr>
      <td class='line'>172</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(" AND (");</pre></td>
    </tr>
    <tr>
      <td class='line'>173</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				for (int i = 0; i &lt; statusArr.length; i++) {</pre></td>
    </tr>
    <tr>
      <td class='line'>174</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>					if (!StringUtils.isEmpty(statusArr[i])) {</pre></td>
    </tr>
    <tr>
      <td class='line'>175</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>						if (i == statusArr.length - 1) {</pre></td>
    </tr>
    <tr>
      <td class='line'>176</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>							sb.append("status:" + statusArr[i]);</pre></td>
    </tr>
    <tr>
      <td class='line'>177</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>						} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>178</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>							sb.append("status:" + statusArr[i] + " OR ");</pre></td>
    </tr>
    <tr>
      <td class='line'>179</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>						}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>181</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>					}</pre></td>
    </tr>
    <tr>
      <td class='line'>182</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				}</pre></td>
    </tr>
    <tr>
      <td class='line'>183</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(")");</pre></td>
    </tr>
    <tr>
      <td class='line'>184</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>185</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(" AND status:" + status);</pre></td>
    </tr>
    <tr>
      <td class='line'>186</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>188</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>190</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(classOne)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>191</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND classOne:" + classOne);</pre></td>
    </tr>
    <tr>
      <td class='line'>192</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>194</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(classTwo)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>195</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND classTwo:" + classTwo);</pre></td>
    </tr>
    <tr>
      <td class='line'>196</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>198</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(classThree)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>199</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND classThree:" + classThree);</pre></td>
    </tr>
    <tr>
      <td class='line'>200</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>202</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(categoryId)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>203</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND categoryId:" + categoryId);</pre></td>
    </tr>
    <tr>
      <td class='line'>204</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>205</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(brand)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>206</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND brand:" + brand);</pre></td>
    </tr>
    <tr>
      <td class='line'>207</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>208</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(suppId)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>209</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND cooperatorId:" + suppId);</pre></td>
    </tr>
    <tr>
      <td class='line'>210</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>212</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 单铺的查询</pre></td>
    </tr>
    <tr>
      <td class='line'>213</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(desc)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>214</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND promotdesc:" + EscapeUtil.escapeQueryChars(desc));</pre></td>
    </tr>
    <tr>
      <td class='line'>215</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>216</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(skuId)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>217</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND skuId:" + skuId);</pre></td>
    </tr>
    <tr>
      <td class='line'>218</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>220</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 查询是否关联-主要查询挂靠关系</pre></td>
    </tr>
    <tr>
      <td class='line'>221</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(anchored)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>222</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			if (Integer.parseInt(anchored) == AnchoredTypeEnum.HAS_REL.getValue()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>223</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(" AND -anchoredId:\"\"");</pre></td>
    </tr>
    <tr>
      <td class='line'>224</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			} else if (Integer.parseInt(anchored) == AnchoredTypeEnum.NO_REL.getValue()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>225</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(" AND anchoredId:\"\"");</pre></td>
    </tr>
    <tr>
      <td class='line'>226</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			} else if (Integer.parseInt(anchored) == AnchoredTypeEnum.HAS_INTR.getValue()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>227</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				sb.append(" AND -introductionId:\"\"");</pre></td>
    </tr>
    <tr>
      <td class='line'>228</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>229</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>231</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(categoryName)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>232</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND categoryName:" + EscapeUtil.escapeQueryChars(categoryName));</pre></td>
    </tr>
    <tr>
      <td class='line'>233</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>234</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(brandName)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>235</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND brandName:" + EscapeUtil.escapeQueryChars(brandName));</pre></td>
    </tr>
    <tr>
      <td class='line'>236</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>238</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(onlySupp)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>239</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND -cooperatorId:" + onlySupp);</pre></td>
    </tr>
    <tr>
      <td class='line'>240</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>241</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(cooPeratorType)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>242</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sb.append(" AND cooPeratorType:" + cooPeratorType);</pre></td>
    </tr>
    <tr>
      <td class='line'>243</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>245</td><td>&nbsp;</td>
      <td><pre class='comment'>		// logger.info("need except delete sku start");</pre></td>
    </tr>
    <tr>
      <td class='line'>246</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 排除删除状态的商品</pre></td>
    </tr>
    <tr>
      <td class='line'>247</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		sb.append(" AND -status:" + String.valueOf(SkuStatusEnum.STATUS_DEL.getValue()));</pre></td>
    </tr>
    <tr>
      <td class='line'>248</td><td>&nbsp;</td>
      <td><pre class='comment'>		// logger.info("need except delete sku end");</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>250</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		int pageSize = param.getPageSize();</pre></td>
    </tr>
    <tr>
      <td class='line'>251</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		int pageNumber = param.getPageNumber();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>253</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		pager.setPageNumber(pageNumber);</pre></td>
    </tr>
    <tr>
      <td class='line'>254</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		pager.setPageSize(pageSize);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>256</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		pageNumber = pageNumber - 1;</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>258</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 排序通过sort参数传递，格式为“字段名”+“空格”+ “ASC或者DESC”，多个排序字段通过“,”连接</pre></td>
    </tr>
    <tr>
      <td class='line'>259</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String sort = "";</pre></td>
    </tr>
    <tr>
      <td class='line'>260</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (!StringUtils.isEmpty(param.getOrderBy())) {</pre></td>
    </tr>
    <tr>
      <td class='line'>261</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sort = param.getOrderBy() + " " + (param.isOrderAsc() == true ? "ASC" : "DESC");</pre></td>
    </tr>
    <tr>
      <td class='line'>262</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sort += ",lastupDate DESC";</pre></td>
    </tr>
    <tr>
      <td class='line'>263</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} else {</pre></td>
    </tr>
    <tr>
      <td class='line'>264</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			sort = "lastupDate DESC";</pre></td>
    </tr>
    <tr>
      <td class='line'>265</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>266</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		UrlBuilder urlBuilder = UrlBuilder.create();</pre></td>
    </tr>
    <tr>
      <td class='line'>267</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		urlBuilder.addPrefix("/select?").appendWithoutPrefix("q", sb.toString()).append("wt", "json")</pre></td>
    </tr>
    <tr>
      <td class='line'>268</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				.append("indent", "false").append("start", (pageNumber * pageSize) + "").append("rows", pageSize + "")</pre></td>
    </tr>
    <tr>
      <td class='line'>269</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				.append("sort", sort);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>271</td><td>&nbsp;</td>
      <td><pre class='comment'>		// 高亮配置</pre></td>
    </tr>
    <tr>
      <td class='line'>272</td><td>&nbsp;</td>
      <td><pre class='comment'>		// if (StringUtils.hasText(hlField)){</pre></td>
    </tr>
    <tr>
      <td class='line'>273</td><td>&nbsp;</td>
      <td><pre class='comment'>		// urlBuilder.append("hl","true")</pre></td>
    </tr>
    <tr>
      <td class='line'>274</td><td>&nbsp;</td>
      <td><pre class='comment'>		// .append("hl.fl",hlField)</pre></td>
    </tr>
    <tr>
      <td class='line'>275</td><td>&nbsp;</td>
      <td><pre class='comment'>		// .append("hl.simple.pre",hlPre)</pre></td>
    </tr>
    <tr>
      <td class='line'>276</td><td>&nbsp;</td>
      <td><pre class='comment'>		// .append("hl.simple.post",hlPost);</pre></td>
    </tr>
    <tr>
      <td class='line'>277</td><td>&nbsp;</td>
      <td><pre class='comment'>		// }</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>279</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String requestUrl = urlBuilder.build();</pre></td>
    </tr>
    <tr>
      <td class='line'>280</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return requestUrl;</pre></td>
    </tr>
    <tr>
      <td class='line'>281</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'></td><td>&nbsp;</td>
      <td class='comment' onclick='showHideLines(this)'><div>	/**
	 * http访问
	 * 
	 * @param url
	 * @return
	 */</div><span>	/*...*/</span></td>
    </tr>
    <tr>
      <td class='line'>289</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public String execute(String url) {</pre></td>
    </tr>
    <tr>
      <td class='line'>290</td><td>&nbsp;</td>
      <td><pre class='comment'>		// httpClientBuilder = HttpClientBuilder.create();</pre></td>
    </tr>
    <tr>
      <td class='line'>291</td><td>&nbsp;</td>
      <td><pre class='comment'>		// httpClientBuilder.build();</pre></td>
    </tr>
    <tr>
      <td class='line'>292</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		HttpClient httpClient = new DefaultHttpClient();</pre></td>
    </tr>
    <tr>
      <td class='line'>293</td><td>&nbsp;</td>
      <td><pre class='comment'>		// CloseableHttpClient httpClient = httpClientBuilder.build();</pre></td>
    </tr>
    <tr>
      <td class='line'>294</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String coreUrl = prop.getProperty("coreUrl");</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>296</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		logger.info("execute core {}", coreUrl + url);</pre></td>
    </tr>
    <tr>
      <td class='line'>297</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		HttpGet httpGet = new HttpGet(coreUrl + url);</pre></td>
    </tr>
    <tr>
      <td class='line'>298</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>299</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			HttpResponse httpResponse = httpClient.execute(httpGet);</pre></td>
    </tr>
    <tr>
      <td class='line'>300</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			HttpEntity entity = httpResponse.getEntity();</pre></td>
    </tr>
    <tr>
      <td class='line'>301</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return EntityUtils.toString(entity);</pre></td>
    </tr>
    <tr>
      <td class='line'>302</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>303</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			logger.error("execute get error", e);</pre></td>
    </tr>
    <tr>
      <td class='line'>304</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			throw new SysException("execute solr fail", e);</pre></td>
    </tr>
    <tr>
      <td class='line'>305</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} finally {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>307</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>308</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>310</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>311</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public void afterPropertiesSet() throws Exception {</pre></td>
    </tr>
    <tr>
      <td class='line'>312</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		prop = getpro();</pre></td>
    </tr>
    <tr>
      <td class='line'>313</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		logger.info("afterPropertiesSet prop {}", prop);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>315</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>317</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Properties getpro() {</pre></td>
    </tr>
    <tr>
      <td class='line'>318</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		UniconfigClient client = UniconfigClientImpl.getInstance();</pre></td>
    </tr>
    <tr>
      <td class='line'>319</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		UniconfigNode node = client.getConfig(nodeName);</pre></td>
    </tr>
    <tr>
      <td class='line'>320</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		node.sync();</pre></td>
    </tr>
    <tr>
      <td class='line'>321</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		String configValue = node.getValue();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>323</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Properties properties = new Properties();</pre></td>
    </tr>
    <tr>
      <td class='line'>324</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		InputStream in = new ByteArrayInputStream(configValue.getBytes());</pre></td>
    </tr>
    <tr>
      <td class='line'>325</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		try {</pre></td>
    </tr>
    <tr>
      <td class='line'>326</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			properties.load(in);</pre></td>
    </tr>
    <tr>
      <td class='line'>327</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		} catch (IOException e) {</pre></td>
    </tr>
    <tr>
      <td class='line'>328</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			e.printStackTrace();</pre></td>
    </tr>
    <tr>
      <td class='line'>329</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>330</td><td>&nbsp;</td>
      <td><pre class='comment'>		// properties.load(configValue);</pre></td>
    </tr>
    <tr>
      <td class='line'>331</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return properties;</pre></td>
    </tr>
    <tr>
      <td class='line'>332</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>334</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>335</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public boolean chkIsUsed(Map&lt;String, Object> map) {</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>337</td><td>&nbsp;</td>
      <td><pre class='comment'>		// map.put("status", SkuStatusEnum.STATUS_UP.getValue());</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/4</span>
        <span class='uncovered' onclick="showPath(this,'l338s0 l342s0 l343s0 l345s0 l346s0 l347s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l338s0 l342s0 l343s0 l345s0 l345s1 l346s0 l347s0')">B: 0</span>
        <span class='uncovered' onclick="showPath(this,'l338s0 l342s0 l350s0')">C: 0</span>
        <span class='uncovered' onclick="showPath(this,'l338s0 l342s0 l343s0 l345s0 l345s1 l350s0')">D: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>338</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		PagerParam param = new PagerParam();</pre></td>
    </tr>
    <tr>
      <td class='line'>339</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		param.setPageNumber(1);</pre></td>
    </tr>
    <tr>
      <td class='line'>340</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		param.setPageSize(10);</pre></td>
    </tr>
    <tr>
      <td class='line'>341</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>342</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (page != null) {</pre></td>
    </tr>
    <tr>
      <td class='line'>343</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			List&lt;SolrGoodsDto> list = page.getDatas();</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>345</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			if (list == null || list.isEmpty()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>346</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				logger.info("data is no used map{}", map);</pre></td>
    </tr>
    <tr>
      <td class='line'>347</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>				return false;</pre></td>
    </tr>
    <tr>
      <td class='line'>348</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			}</pre></td>
    </tr>
    <tr>
      <td class='line'>349</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>350</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return true;</pre></td>
    </tr>
    <tr>
      <td class='line'>351</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>353</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>354</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Pager&lt;SolrGoodsDto> queryGoodsByBarCode(String barCode, String cooperatorId, PagerParam param) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/2</span>
        <span class='uncovered' onclick="showPath(this,'l355s0 l356s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l355s0 l359s0 l363s0')">B: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>355</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (StringUtils.isEmpty(barCode)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>356</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return null;</pre></td>
    </tr>
    <tr>
      <td class='line'>357</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>359</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Map&lt;String, Object> map = new HashMap&lt;String, Object>();</pre></td>
    </tr>
    <tr>
      <td class='line'>360</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("barCode", barCode);</pre></td>
    </tr>
    <tr>
      <td class='line'>361</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("cooperatorId", cooperatorId);</pre></td>
    </tr>
    <tr>
      <td class='line'>362</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>363</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return page;</pre></td>
    </tr>
    <tr>
      <td class='line'>364</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>366</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>367</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Boolean checkBarCode(String barCode, String cooperatorId) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/2</span>
        <span class='uncovered' onclick="showPath(this,'l368s0 l369s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l368s0 l372s0 l380s0 l380s1 l380s3')">B: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>368</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (StringUtils.isEmpty(barCode)) {</pre></td>
    </tr>
    <tr>
      <td class='line'>369</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return false;</pre></td>
    </tr>
    <tr>
      <td class='line'>370</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>372</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Map&lt;String, Object> map = new HashMap&lt;String, Object>();</pre></td>
    </tr>
    <tr>
      <td class='line'>373</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("barCode", barCode);</pre></td>
    </tr>
    <tr>
      <td class='line'>374</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("suppId", cooperatorId);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>376</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		PagerParam pager = new PagerParam();</pre></td>
    </tr>
    <tr>
      <td class='line'>377</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		pager.setPageSize(10);</pre></td>
    </tr>
    <tr>
      <td class='line'>378</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		pager.setPageNumber(1);</pre></td>
    </tr>
    <tr>
      <td class='line'>379</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, pager);</pre></td>
    </tr>
    <tr>
      <td class='line'>380</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return page.getTotalDataCount() > 0 ? true : false;</pre></td>
    </tr>
    <tr>
      <td class='line'>381</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>383</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>384</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Pager&lt;SolrGoodsDto> searchGoods(String companyId, String barCode, String goodsName, String desc,</pre></td>
    </tr>
    <tr>
      <td class='line'>385</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			String skuId, PagerParam param) {</pre></td>
    </tr>
    <tr>
      <td class='line'>386</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Map&lt;String, Object> map = new HashMap&lt;String, Object>();</pre></td>
    </tr>
    <tr>
      <td class='line'>387</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("suppId", companyId);</pre></td>
    </tr>
    <tr>
      <td class='line'>388</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("barCode", barCode);</pre></td>
    </tr>
    <tr>
      <td class='line'>389</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("title", goodsName);</pre></td>
    </tr>
    <tr>
      <td class='line'>390</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("desc", desc);</pre></td>
    </tr>
    <tr>
      <td class='line'>391</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("skuId", skuId);</pre></td>
    </tr>
    <tr>
      <td class='line'>392</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("status", 1);</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>394</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>395</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return page;</pre></td>
    </tr>
    <tr>
      <td class='line'>396</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>398</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>399</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Pager&lt;SolrGoodsDto> searchGoods(Map&lt;String, Object> map, PagerParam param, int anchoredType) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/2</span>
        <span class='uncovered' onclick="showPath(this,'l400s0 l403s0 l404s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l400s0 l401s0 l403s0 l404s0')">B: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>400</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (anchoredType != AnchoredTypeEnum.ALL.getValue()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>401</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			map.put("anchored", anchoredType);</pre></td>
    </tr>
    <tr>
      <td class='line'>402</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>403</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>404</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return page;</pre></td>
    </tr>
    <tr>
      <td class='line'>405</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>407</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>408</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public Pager&lt;SolrGoodsDto> searchSuppGoods(Map&lt;String, Object> map, PagerParam param, int anchoredType) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/2</span>
        <span class='uncovered' onclick="showPath(this,'l409s0 l413s0 l414s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l409s0 l410s0 l413s0 l414s0')">B: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>409</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (anchoredType != AnchoredTypeEnum.ALL.getValue()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>410</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			map.put("anchored", anchoredType);</pre></td>
    </tr>
    <tr>
      <td class='line'>411</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>412</td><td>&nbsp;</td>
      <td><pre class='comment'>		// map.put("onlySupp", "1000");</pre></td>
    </tr>
    <tr>
      <td class='line'>413</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>414</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return page;</pre></td>
    </tr>
    <tr>
      <td class='line'>415</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr><td class='line'></td><td colspan='2'>&nbsp;</td></tr>
    <tr>
      <td class='line'>417</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	@Override</pre></td>
    </tr>
    <tr>
      <td class='line'>418</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	public SolrGoodsDto getBySkuId(String skuId) {</pre></td>
    </tr>
    <tr>
      <td></td><td class='count'>0</td>
      <td class='paths'>
        <span style='cursor:default; background-color:#ff0000' onclick='hidePath()'>Path coverage: 0/3</span>
        <span class='uncovered' onclick="showPath(this,'l419s0 l426s0 l426s1 l427s0')">A: 0</span>
        <span class='uncovered' onclick="showPath(this,'l419s0 l426s0 l429s0')">B: 0</span>
        <span class='uncovered' onclick="showPath(this,'l419s0 l426s0 l426s1 l429s0')">C: 0</span>
      </td>
    </tr>
    <tr>
      <td class='line'>419</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Map&lt;String, Object> map = new HashMap&lt;>();</pre></td>
    </tr>
    <tr>
      <td class='line'>420</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		PagerParam param = new PagerParam();</pre></td>
    </tr>
    <tr>
      <td class='line'>421</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		param.setPageNumber(1);</pre></td>
    </tr>
    <tr>
      <td class='line'>422</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		param.setPageSize(10);</pre></td>
    </tr>
    <tr>
      <td class='line'>423</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		map.put("skuId", skuId);</pre></td>
    </tr>
    <tr>
      <td class='line'>424</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		Pager&lt;SolrGoodsDto> page = searchGoods(map, param);</pre></td>
    </tr>
    <tr>
      <td class='line'>425</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		List&lt;SolrGoodsDto> datas = page.getDatas();</pre></td>
    </tr>
    <tr>
      <td class='line'>426</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		if (datas != null && !datas.isEmpty()) {</pre></td>
    </tr>
    <tr>
      <td class='line'>427</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>			return datas.get(0);</pre></td>
    </tr>
    <tr>
      <td class='line'>428</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		}</pre></td>
    </tr>
    <tr>
      <td class='line'>429</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>		return null;</pre></td>
    </tr>
    <tr>
      <td class='line'>430</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>	}</pre></td>
    </tr>
    <tr>
      <td class='line'>431</td><td>&nbsp;</td>
      <td><pre class='prettyprint'>}</pre></td>
    </tr>
  </table>
</body>
</html>
